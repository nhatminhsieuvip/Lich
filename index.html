<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lịch</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            font-family:'Inter',sans-serif;
            background:#fafafa;
            color:#1a1a1a;
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:20px;
        }
        .container{
            width:100%;
            max-width:500px;
            background:white;
            border-radius:12px;
            box-shadow:0 2px 20px rgba(0,0,0,.08);
            overflow:hidden;
        }
        .header{
            padding:30px;
            border-bottom:1px solid #f0f0f0;
            text-align:center;
        }
        .title{
            font-size:1.5rem;
            font-weight:300;
            color:#1a1a1a;
            margin-bottom:20px;
            letter-spacing:.5px;
        }
        .nav-bar{
            display:flex;
            gap:8px;
            justify-content:center;
            flex-wrap:wrap;
        }
        .nav-btn{
            padding:8px 16px;
            background:transparent;
            border:1px solid #e0e0e0;
            border-radius:20px;
            font-size:.85rem;
            color:#666;
            cursor:pointer;
            transition:all .2s;
            font-weight:500;
        }
        .nav-btn:hover{
            border-color:#1a1a1a;
            color:#1a1a1a;
        }
        .nav-btn.active{
            background:#1a1a1a;
            color:white;
            border-color:#1a1a1a;
        }
        .date-display{
            font-size:1.25rem;
            font-weight:400;
            color:#1a1a1a;
            margin:25px 0;
            text-align:center;
            letter-spacing:.5px;
        }
        .controls{
            display:flex;
            gap:12px;
            justify-content:center;
            align-items:center;
        }
        .control-btn{
            background:none;
            border:none;
            font-size:1.2rem;
            color:#666;
            cursor:pointer;
            padding:8px;
            transition:color .2s;
        }
        .control-btn:hover{color:#1a1a1a}
        .calendar{padding:0 30px 30px}
        .calendar-grid{display:grid;gap:2px}
        .calendar-grid.month,
        .calendar-grid.week{grid-template-columns:repeat(7,1fr)}
        .calendar-grid.year{grid-template-columns:repeat(3,1fr);gap:15px}
        .weekday-header{
            text-align:center;
            padding:12px 4px;
            font-size:.75rem;
            color:#888;
            font-weight:500;
            letter-spacing:.5px;
        }
        .day-cell{
            aspect-ratio:1;
            display:flex;
            align-items:center;
            justify-content:center;
            font-size:.95rem;
            color:#1a1a1a;
            cursor:pointer;
            transition:all .2s;
            border-radius:4px;
        }
        .day-cell:hover{background:#f5f5f5}
        .day-cell.today{background:#1a1a1a;color:white;font-weight:500}
        .day-cell.other-month{color:#ccc}
        .day-cell.selected{background:#f0f0f0;font-weight:500}
        .month-card{
            background:white;
            border:1px solid #e0e0e0;
            border-radius:8px;
            padding:15px;
            cursor:pointer;
            transition:all .2s;
        }
        .month-card:hover{border-color:#1a1a1a}
        .month-card.current-month{border-color:#1a1a1a;background:#fafafa}
        .month-name{
            font-size:1rem;
            font-weight:500;
            margin-bottom:8px;
            text-align:center;
        }
        .mini-calendar{
            display:grid;
            grid-template-columns:repeat(7,1fr);
            gap:1px;
            font-size:.65rem;
        }
        .mini-day{
            aspect-ratio:1;
            display:flex;
            align-items:center;
            justify-content:center;
            color:#666;
        }
        .mini-day.today{color:#1a1a1a;font-weight:600}
        .mini-day.other-month{color:#ccc}
        @media(max-width:500px){
            .container{margin:0;border-radius:0;min-height:100vh;box-shadow:none}
            .calendar-grid.year{grid-template-columns:repeat(2,1fr);gap:10px}
            .header{padding:20px}
            .calendar{padding:0 20px 20px}
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Lịch</h1>
            <div class="nav-bar">
                <button class="nav-btn active" onclick="changeView('month')">Tháng</button>
                <button class="nav-btn" onclick="changeView('week')">Tuần</button>
                <button class="nav-btn" onclick="changeView('year')">Năm</button>
            </div>
            <div class="date-display" id="dateDisplay">Tháng 8 Năm 2025</div>
            <div class="controls">
                <button class="control-btn" onclick="navigate('prev')">‹</button>
                <button class="control-btn" onclick="goToToday()">•</button>
                <button class="control-btn" onclick="navigate('next')">›</button>
            </div>
        </div>
        <div class="calendar">
            <div class="calendar-grid month" id="calendarContainer"></div>
        </div>
    </div>

    <script>
        let currentDate = new Date();
        let currentView = 'month';

        const monthNames = [
            'Tháng 1','Tháng 2','Tháng 3','Tháng 4','Tháng 5','Tháng 6',
            'Tháng 7','Tháng 8','Tháng 9','Tháng 10','Tháng 11','Tháng 12'
        ];
        const dayNames = ['CN','T2','T3','T4','T5','T6','T7'];

        function changeView(view){
            currentView = view;
            document.querySelectorAll('.nav-btn').forEach(btn=>btn.classList.remove('active'));
            event.target.classList.add('active');
            renderCalendar();
        }

        function navigate(direction){
            const amount = direction === 'next' ? 1 : -1;
            if(currentView === 'month'){
                currentDate.setMonth(currentDate.getMonth() + amount);
            }else if(currentView === 'week'){
                currentDate.setDate(currentDate.getDate() + amount * 7);
            }else if(currentView === 'year'){
                currentDate.setFullYear(currentDate.getFullYear() + amount);
            }
            renderCalendar();
        }

        function goToToday(){
            currentDate = new Date();
            renderCalendar();
        }

        function renderCalendar(){
            const container = document.getElementById('calendarContainer');
            const dateDisplay = document.getElementById('dateDisplay');
            container.className = `calendar-grid ${currentView}`;
            switch(currentView){
                case 'month':
                    renderMonthView(container);
                    dateDisplay.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
                    break;
                case 'week':
                    renderWeekView(container);
                    const week = getWeekNumber(currentDate);
                    dateDisplay.textContent = `Tuần ${week} - ${currentDate.getFullYear()}`;
                    break;
                case 'year':
                    renderYearView(container);
                    dateDisplay.textContent = `${currentDate.getFullYear()}`;
                    break;
            }
        }

        function renderMonthView(container){
            container.innerHTML = '';
            dayNames.forEach(day=>{
                const header=document.createElement('div');
                header.className='weekday-header';
                header.textContent=day;
                container.appendChild(header);
            });
            const firstDay=new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const startDate=new Date(firstDay);
            startDate.setDate(startDate.getDate()-firstDay.getDay());
            const today=new Date();
            for(let i=0;i<42;i++){
                const cellDate=new Date(startDate);
                cellDate.setDate(startDate.getDate()+i);
                const cell=document.createElement('div');
                cell.className='day-cell';
                cell.textContent=cellDate.getDate();
                if(cellDate.getMonth()!==currentDate.getMonth()) cell.classList.add('other-month');
                if(cellDate.toDateString()===today.toDateString()) cell.classList.add('today');
                cell.addEventListener('click',()=>selectDay(cellDate));
                container.appendChild(cell);
            }
        }

        function renderWeekView(container){
            container.innerHTML='';
            dayNames.forEach(day=>{
                const header=document.createElement('div');
                header.className='weekday-header';
                header.textContent=day;
                container.appendChild(header);
            });
            const startOfWeek=new Date(currentDate);
            startOfWeek.setDate(currentDate.getDate()-currentDate.getDay());
            const today=new Date();
            for(let i=0;i<7;i++){
                const cellDate=new Date(startOfWeek);
                cellDate.setDate(startOfWeek.getDate()+i);
                const cell=document.createElement('div');
                cell.className='day-cell';
                cell.textContent=cellDate.getDate();
                if(cellDate.toDateString()===today.toDateString()) cell.classList.add('today');
                cell.addEventListener('click',()=>selectDay(cellDate));
                container.appendChild(cell);
            }
        }

        function renderYearView(container){
            container.innerHTML='';
            container.className='calendar-grid year';
            for(let i=0;i<12;i++){
                const monthCard=document.createElement('div');
                monthCard.className='month-card';
                if(i===currentDate.getMonth()) monthCard.classList.add('current-month');

                const monthName=document.createElement('div');
                monthName.className='month-name';
                monthName.textContent=monthNames[i];
                monthCard.appendChild(monthName);

                const miniCalendar=document.createElement('div');
                miniCalendar.className='mini-calendar';
                const firstDay=new Date(currentDate.getFullYear(),i,1);
                const startDate=new Date(firstDay);
                startDate.setDate(startDate.getDate()-firstDay.getDay());
                const today=new Date();

                for(let j=0;j<35;j++){
                    const cellDate=new Date(startDate);
                    cellDate.setDate(startDate.getDate()+j);
                    const miniDay=document.createElement('div');
                    miniDay.className='mini-day';
                    miniDay.textContent=cellDate.getDate();
                    if(cellDate.getMonth()!==i) miniDay.classList.add('other-month');
                    if(cellDate.toDateString()===today.toDateString()) miniDay.classList.add('today');
                    miniCalendar.appendChild(miniDay);
                }
                monthCard.appendChild(miniCalendar);
                monthCard.addEventListener('click',()=>{
                    currentDate.setMonth(i);
                    changeView('month');
                });
                container.appendChild(monthCard);
            }
        }

        function selectDay(date){
            document.querySelectorAll('.day-cell').forEach(cell=>cell.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        // ISO 8601 week number
        function getWeekNumber(date){
            const d=new Date(Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()));
            const dayNum=d.getUTCDay()||7;
            d.setUTCDate(d.getUTCDate()+4-dayNum);
            const yearStart=new Date(Date.UTC(d.getUTCFullYear(),0,1));
            return Math.ceil((((d-yearStart)/86400000)+1)/7);
        }

        renderCalendar();
    </script>
</body>
</html>
